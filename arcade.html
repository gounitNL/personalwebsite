<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcade Games - PlayZone</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .menu-view { padding: 2rem; max-width: 1200px; margin: 0 auto; }
        .header { text-align: center; color: white; margin-bottom: 2rem; }
        .header h1 { font-size: 3rem; margin-bottom: 1rem; text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3); }
        
        .back-btn {
            display: inline-block; padding: 0.8rem 2rem; background: white; color: #667eea;
            text-decoration: none; border-radius: 50px; font-weight: 600; margin-bottom: 2rem;
            transition: transform 0.3s ease;
        }
        .back-btn:hover { transform: scale(1.05); }

        .games-menu {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; margin-top: 2rem;
        }

        .game-menu-card {
            background: white; border-radius: 15px; padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .game-menu-card:hover { transform: translateY(-10px); box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3); }
        .game-menu-card .icon { font-size: 4rem; text-align: center; margin-bottom: 1rem; }
        .game-menu-card h3 { color: #667eea; font-size: 1.5rem; margin-bottom: 0.5rem; text-align: center; }
        .game-menu-card p { color: #666; text-align: center; font-size: 0.9rem; }

        .game-view {
            display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); z-index: 1000; overflow-y: auto;
        }
        .game-view.active { display: block; }

        .game-header {
            background: rgba(255, 255, 255, 0.95); padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); display: flex;
            justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;
        }
        .game-title { font-size: 1.5rem; color: #667eea; font-weight: bold; }
        .game-controls { display: flex; gap: 1rem; align-items: center; flex-wrap: wrap; }
        
        .close-game-btn {
            background: #f44336; color: white; border: none; padding: 0.6rem 1.5rem;
            border-radius: 50px; font-weight: 600; cursor: pointer; transition: transform 0.3s ease;
        }
        .close-game-btn:hover { transform: scale(1.05); }

        .game-content { padding: 2rem; display: flex; flex-direction: column; align-items: center; }
        .game-area { position: relative; }

        canvas {
            border: 3px solid #667eea; border-radius: 10px; display: block;
            background: #f0f0f0; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;
            padding: 0.8rem 2rem; border-radius: 50px; font-weight: 600; cursor: pointer;
            transition: transform 0.3s ease; margin: 0.5rem;
        }
        button:hover { transform: scale(1.05); }

        .score { font-size: 1.2rem; font-weight: bold; color: white; margin: 1rem 0; }
        
        .controls {
            background: rgba(255, 255, 255, 0.9); padding: 1rem; border-radius: 10px;
            margin: 1rem 0; text-align: center; color: #666; max-width: 600px;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .game-title { font-size: 1.2rem; }
            .game-header { padding: 1rem; }
            .game-content { padding: 1rem; }
            .games-menu { grid-template-columns: 1fr; }
            canvas { max-width: 100%; height: auto; }
        }
    </style>
</head>
<body>
    <div class="menu-view" id="menuView">
        <div class="header">
            <a href="index.html" class="back-btn">‚Üê Back to Home</a>
            <h1>üïπÔ∏è Arcade Games</h1>
            <p style="font-size: 1.2rem; margin-top: 0.5rem;">Classic arcade action!</p>
        </div>

        <div class="games-menu">
            <div class="game-menu-card" onclick="openGame('flappy')">
                <div class="icon">üê¶</div>
                <h3>Flappy Bird</h3>
                <p>Tap to flap and avoid pipes!</p>
            </div>
            <div class="game-menu-card" onclick="openGame('breakout')">
                <div class="icon">üß±</div>
                <h3>Breakout</h3>
                <p>Break all the bricks!</p>
            </div>
            <div class="game-menu-card" onclick="openGame('dino')">
                <div class="icon">ü¶ñ</div>
                <h3>Dino Runner</h3>
                <p>Jump over obstacles!</p>
            </div>
            <div class="game-menu-card" onclick="openGame('asteroids')">
                <div class="icon">üöÄ</div>
                <h3>Asteroids</h3>
                <p>Shoot the asteroids!</p>
            </div>
            <div class="game-menu-card" onclick="openGame('platformer')">
                <div class="icon">üéÆ</div>
                <h3>Platformer</h3>
                <p>Collect coins and jump!</p>
            </div>
        </div>
    </div>

    <!-- Game Views -->
    <div class="game-view" id="game-flappy">
        <div class="game-header">
            <div class="game-title">üê¶ Flappy Bird</div>
            <div class="game-controls">
                <div class="score">Score: <span id="flappy-score">0</span> | High: <span id="flappy-high">0</span></div>
                <button onclick="startFlappyBird()">Start Game</button>
                <button class="close-game-btn" onclick="closeGame()">‚úï Close</button>
            </div>
        </div>
        <div class="game-content">
            <div class="game-area">
                <canvas id="flappy-canvas" width="400" height="500"></canvas>
            </div>
            <div class="controls">Press SPACE or Click to flap!</div>
        </div>
    </div>

    <div class="game-view" id="game-breakout">
        <div class="game-header">
            <div class="game-title">üß± Breakout</div>
            <div class="game-controls">
                <div class="score">Score: <span id="breakout-score">0</span> | Lives: <span id="breakout-lives">3</span></div>
                <button onclick="startBreakout()">Start Game</button>
                <button class="close-game-btn" onclick="closeGame()">‚úï Close</button>
            </div>
        </div>
        <div class="game-content">
            <div class="game-area">
                <canvas id="breakout-canvas" width="400" height="500"></canvas>
            </div>
            <div class="controls">Move paddle with Arrow Keys or Mouse</div>
        </div>
    </div>

    <div class="game-view" id="game-dino">
        <div class="game-header">
            <div class="game-title">ü¶ñ Dino Runner</div>
            <div class="game-controls">
                <div class="score">Score: <span id="dino-score">0</span> | High: <span id="dino-high">0</span></div>
                <button onclick="startDinoRunner()">Start Game</button>
                <button class="close-game-btn" onclick="closeGame()">‚úï Close</button>
            </div>
        </div>
        <div class="game-content">
            <div class="game-area">
                <canvas id="dino-canvas" width="600" height="300"></canvas>
            </div>
            <div class="controls">Press SPACE or Click to jump!</div>
        </div>
    </div>

    <div class="game-view" id="game-asteroids">
        <div class="game-header">
            <div class="game-title">üöÄ Asteroids</div>
            <div class="game-controls">
                <div class="score">Score: <span id="asteroids-score">0</span> | Lives: <span id="asteroids-lives">3</span></div>
                <button onclick="startAsteroids()">Start Game</button>
                <button class="close-game-btn" onclick="closeGame()">‚úï Close</button>
            </div>
        </div>
        <div class="game-content">
            <div class="game-area">
                <canvas id="asteroids-canvas" width="500" height="500"></canvas>
            </div>
            <div class="controls">Arrow Keys: Rotate & Move | SPACE: Shoot</div>
        </div>
    </div>

    <div class="game-view" id="game-platformer">
        <div class="game-header">
            <div class="game-title">üéÆ Platformer</div>
            <div class="game-controls">
                <div class="score">Coins: <span id="platform-score">0</span> | Lives: <span id="platform-lives">3</span></div>
                <button onclick="startPlatformer()">Start Game</button>
                <button class="close-game-btn" onclick="closeGame()">‚úï Close</button>
            </div>
        </div>
        <div class="game-content">
            <div class="game-area">
                <canvas id="platform-canvas" width="600" height="400"></canvas>
            </div>
            <div class="controls">Arrow Keys: Move | SPACE: Jump</div>
        </div>
    </div>

    <script>
        function openGame(gameName) {
            document.getElementById('menuView').style.display = 'none';
            document.getElementById('game-' + gameName).classList.add('active');
        }

        function closeGame() {
            document.querySelectorAll('.game-view').forEach(view => view.classList.remove('active'));
            document.getElementById('menuView').style.display = 'block';
            if (flappyAnimationId) cancelAnimationFrame(flappyAnimationId);
            if (breakoutAnimationId) cancelAnimationFrame(breakoutAnimationId);
            if (dinoAnimationId) cancelAnimationFrame(dinoAnimationId);
            if (asteroidsAnimationId) cancelAnimationFrame(asteroidsAnimationId);
            if (platformAnimationId) cancelAnimationFrame(platformAnimationId);
        }

        // FLAPPY BIRD
        let flappyCanvas, flappyCtx, flappyBird, flappyPipes, flappyScore, flappyHighScore, flappyGameRunning, flappyAnimationId;

        function startFlappyBird() {
            flappyCanvas = document.getElementById('flappy-canvas');
            flappyCtx = flappyCanvas.getContext('2d');
            flappyBird = { x: 50, y: 200, velocity: 0, radius: 20 };
            flappyPipes = [];
            flappyScore = 0;
            flappyHighScore = parseInt(localStorage.getItem('flappyHigh') || 0);
            flappyGameRunning = true;
            document.getElementById('flappy-score').textContent = flappyScore;
            document.getElementById('flappy-high').textContent = flappyHighScore;
            if (flappyAnimationId) cancelAnimationFrame(flappyAnimationId);
            flappyGameLoop();
        }

        function flappyGameLoop() {
            if (!flappyGameRunning) return;
            flappyCtx.fillStyle = '#87CEEB';
            flappyCtx.fillRect(0, 0, flappyCanvas.width, flappyCanvas.height);
            
            flappyBird.velocity += 0.6;
            flappyBird.y += flappyBird.velocity;
            
            flappyCtx.fillStyle = '#FFD700';
            flappyCtx.beginPath();
            flappyCtx.arc(flappyBird.x, flappyBird.y, flappyBird.radius, 0, Math.PI * 2);
            flappyCtx.fill();
            
            if (flappyPipes.length === 0 || flappyPipes[flappyPipes.length - 1].x < flappyCanvas.width - 200) {
                const gap = Math.max(120, 150 - Math.floor(flappyScore / 10) * 5); // Gap narrows every 10 points
                const height = Math.random() * (flappyCanvas.height - gap - 100) + 50;
                flappyPipes.push({ x: flappyCanvas.width, top: height, bottom: height + gap });
            }
            
            for (let i = flappyPipes.length - 1; i >= 0; i--) {
                const pipe = flappyPipes[i];
                const speed = 3 + Math.floor(flappyScore / 5) * 0.5; // Speed increases every 5 points
                pipe.x -= speed;
                
                flappyCtx.fillStyle = '#228B22';
                flappyCtx.fillRect(pipe.x, 0, 60, pipe.top);
                flappyCtx.fillRect(pipe.x, pipe.bottom, 60, flappyCanvas.height - pipe.bottom);
                
                if (flappyBird.x + flappyBird.radius > pipe.x && flappyBird.x - flappyBird.radius < pipe.x + 60) {
                    if (flappyBird.y - flappyBird.radius < pipe.top || flappyBird.y + flappyBird.radius > pipe.bottom) {
                        endFlappyGame();
                        return;
                    }
                }
                
                if (pipe.x + 60 < flappyBird.x && !pipe.scored) {
                    flappyScore++;
                    pipe.scored = true;
                    document.getElementById('flappy-score').textContent = flappyScore;
                }
                
                if (pipe.x < -60) flappyPipes.splice(i, 1);
            }
            
            if (flappyBird.y + flappyBird.radius > flappyCanvas.height || flappyBird.y - flappyBird.radius < 0) {
                endFlappyGame();
                return;
            }
            
            flappyAnimationId = requestAnimationFrame(flappyGameLoop);
        }

        function flappyJump() {
            if (flappyGameRunning) {
                flappyBird.velocity = -10;
            } else {
                // Restart game if it's over
                startFlappyBird();
            }
        }

        function endFlappyGame() {
            flappyGameRunning = false;
            if (flappyScore > flappyHighScore) {
                flappyHighScore = flappyScore;
                localStorage.setItem('flappyHigh', flappyHighScore);
                document.getElementById('flappy-high').textContent = flappyHighScore;
            }
            
            // Haptic feedback on mobile
            if (navigator.vibrate) navigator.vibrate(200);
            
            // Game over message
            flappyCtx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            flappyCtx.fillRect(0, 0, flappyCanvas.width, flappyCanvas.height);
            flappyCtx.fillStyle = 'white';
            flappyCtx.font = 'bold 36px Arial';
            flappyCtx.textAlign = 'center';
            flappyCtx.fillText('GAME OVER', flappyCanvas.width / 2, flappyCanvas.height / 2 - 30);
            flappyCtx.font = '20px Arial';
            flappyCtx.fillText(`Score: ${flappyScore}`, flappyCanvas.width / 2, flappyCanvas.height / 2 + 10);
            flappyCtx.fillText('Click or Space to Restart', flappyCanvas.width / 2, flappyCanvas.height / 2 + 50);
        }

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' && document.getElementById('game-flappy').classList.contains('active')) {
                e.preventDefault();
                flappyJump();
            }
        });
        document.getElementById('flappy-canvas').addEventListener('click', flappyJump);

        // BREAKOUT
        let breakoutCanvas, breakoutCtx, breakoutBall, breakoutPaddle, breakoutBricks, breakoutScore, breakoutLives, breakoutGameRunning, breakoutAnimationId;

        function startBreakout() {
            breakoutCanvas = document.getElementById('breakout-canvas');
            breakoutCtx = breakoutCanvas.getContext('2d');
            breakoutBall = { x: 200, y: 400, dx: 3, dy: -3, radius: 8 };
            breakoutPaddle = { x: 160, y: 470, width: 80, height: 10, dx: 0 };
            breakoutScore = 0;
            breakoutLives = 3;
            breakoutGameRunning = true;
            
            breakoutBricks = [];
            for (let row = 0; row < 5; row++) {
                for (let col = 0; col < 8; col++) {
                    breakoutBricks.push({
                        x: col * 50 + 5, y: row * 20 + 30, width: 45, height: 15, active: true,
                        color: ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8'][row]
                    });
                }
            }
            
            document.getElementById('breakout-score').textContent = breakoutScore;
            document.getElementById('breakout-lives').textContent = breakoutLives;
            if (breakoutAnimationId) cancelAnimationFrame(breakoutAnimationId);
            breakoutGameLoop();
        }

        function breakoutGameLoop() {
            if (!breakoutGameRunning) return;
            
            breakoutCtx.fillStyle = '#1a1a2e';
            breakoutCtx.fillRect(0, 0, breakoutCanvas.width, breakoutCanvas.height);
            
            breakoutBall.x += breakoutBall.dx;
            breakoutBall.y += breakoutBall.dy;
            
            breakoutCtx.fillStyle = '#fff';
            breakoutCtx.beginPath();
            breakoutCtx.arc(breakoutBall.x, breakoutBall.y, breakoutBall.radius, 0, Math.PI * 2);
            breakoutCtx.fill();
            
            if (breakoutBall.x + breakoutBall.radius > breakoutCanvas.width || breakoutBall.x - breakoutBall.radius < 0) {
                breakoutBall.dx = -breakoutBall.dx;
            }
            if (breakoutBall.y - breakoutBall.radius < 0) {
                breakoutBall.dy = -breakoutBall.dy;
            }
            
            if (breakoutBall.y + breakoutBall.radius > breakoutPaddle.y &&
                breakoutBall.x > breakoutPaddle.x &&
                breakoutBall.x < breakoutPaddle.x + breakoutPaddle.width) {
                breakoutBall.dy = -Math.abs(breakoutBall.dy);
            }
            
            if (breakoutBall.y + breakoutBall.radius > breakoutCanvas.height) {
                breakoutLives--;
                document.getElementById('breakout-lives').textContent = breakoutLives;
                if (breakoutLives === 0) {
                    breakoutGameRunning = false;
                    if (navigator.vibrate) navigator.vibrate(200);
                    // Game over message
                    breakoutCtx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                    breakoutCtx.fillRect(0, 0, breakoutCanvas.width, breakoutCanvas.height);
                    breakoutCtx.fillStyle = 'white';
                    breakoutCtx.font = 'bold 36px Arial';
                    breakoutCtx.textAlign = 'center';
                    breakoutCtx.fillText('GAME OVER', breakoutCanvas.width / 2, breakoutCanvas.height / 2 - 30);
                    breakoutCtx.font = '20px Arial';
                    breakoutCtx.fillText(`Score: ${breakoutScore}`, breakoutCanvas.width / 2, breakoutCanvas.height / 2 + 10);
                    breakoutCtx.fillText('Click to Restart', breakoutCanvas.width / 2, breakoutCanvas.height / 2 + 50);
                    return;
                }
                breakoutBall.x = 200;
                breakoutBall.y = 400;
                const speedMultiplier = 1 + (breakoutScore / 500); // Ball gets faster as score increases
                breakoutBall.dx = 3 * speedMultiplier;
                breakoutBall.dy = -3 * speedMultiplier;
            }
            
            breakoutPaddle.x += breakoutPaddle.dx;
            if (breakoutPaddle.x < 0) breakoutPaddle.x = 0;
            if (breakoutPaddle.x + breakoutPaddle.width > breakoutCanvas.width) {
                breakoutPaddle.x = breakoutCanvas.width - breakoutPaddle.width;
            }
            
            breakoutCtx.fillStyle = '#fff';
            breakoutCtx.fillRect(breakoutPaddle.x, breakoutPaddle.y, breakoutPaddle.width, breakoutPaddle.height);
            
            let allBroken = true;
            breakoutBricks.forEach(brick => {
                if (brick.active) {
                    allBroken = false;
                    breakoutCtx.fillStyle = brick.color;
                    breakoutCtx.fillRect(brick.x, brick.y, brick.width, brick.height);
                    
                    if (breakoutBall.x > brick.x && breakoutBall.x < brick.x + brick.width &&
                        breakoutBall.y > brick.y && breakoutBall.y < brick.y + brick.height) {
                        breakoutBall.dy = -breakoutBall.dy;
                        brick.active = false;
                        breakoutScore += 10;
                        document.getElementById('breakout-score').textContent = breakoutScore;
                    }
                }
            });
            
            if (allBroken) {
                // Level up: Create more bricks and increase ball speed slightly
                for (let row = 0; row < 5; row++) {
                    for (let col = 0; col < 8; col++) {
                        breakoutBricks.push({
                            x: col * 50 + 5, y: row * 20 + 30, width: 45, height: 15, active: true,
                            color: ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8'][row]
                        });
                    }
                }
                breakoutBall.dx *= 1.1;
                breakoutBall.dy *= 1.1;
            }
            
            breakoutAnimationId = requestAnimationFrame(breakoutGameLoop);
        }

        document.addEventListener('keydown', (e) => {
            if (document.getElementById('game-breakout').classList.contains('active')) {
                if (e.key === 'ArrowLeft') breakoutPaddle.dx = -6;
                if (e.key === 'ArrowRight') breakoutPaddle.dx = 6;
                if (e.code === 'Space' && !breakoutGameRunning) {
                    e.preventDefault();
                    startBreakout();
                }
            }
        });
        document.addEventListener('keyup', (e) => {
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') breakoutPaddle.dx = 0;
        });
        
        // Click to restart Breakout
        document.getElementById('breakout-canvas').addEventListener('click', () => {
            if (!breakoutGameRunning) startBreakout();
        });

        // DINO RUNNER
        let dinoCanvas, dinoCtx, dino, obstacles, dinoScore, dinoHighScore, dinoGameRunning, dinoAnimationId, dinoFrameCount;

        function startDinoRunner() {
            dinoCanvas = document.getElementById('dino-canvas');
            dinoCtx = dinoCanvas.getContext('2d');
            dino = { x: 50, y: 240, width: 30, height: 40, jumping: false, velocity: 0 };
            obstacles = [];
            dinoScore = 0;
            dinoHighScore = parseInt(localStorage.getItem('dinoHigh') || 0);
            dinoGameRunning = true;
            dinoFrameCount = 0;
            document.getElementById('dino-score').textContent = dinoScore;
            document.getElementById('dino-high').textContent = dinoHighScore;
            if (dinoAnimationId) cancelAnimationFrame(dinoAnimationId);
            dinoGameLoop();
        }

        function dinoGameLoop() {
            if (!dinoGameRunning) return;
            dinoFrameCount++;
            
            dinoCtx.fillStyle = '#f0f0f0';
            dinoCtx.fillRect(0, 0, dinoCanvas.width, dinoCanvas.height);
            dinoCtx.fillStyle = '#333';
            dinoCtx.fillRect(0, 280, dinoCanvas.width, 2);
            
            if (dino.jumping) {
                dino.velocity += 0.8;
                dino.y += dino.velocity;
                if (dino.y >= 240) {
                    dino.y = 240;
                    dino.jumping = false;
                    dino.velocity = 0;
                }
            }
            
            dinoCtx.fillStyle = '#666';
            dinoCtx.fillRect(dino.x, dino.y, dino.width, dino.height);
            
            const spawnRate = Math.max(50, 100 - Math.floor(dinoScore / 5) * 5); // More frequent obstacles as score increases
            if (dinoFrameCount % spawnRate === 0) {
                obstacles.push({ x: dinoCanvas.width, y: 250, width: 20, height: 30 });
            }
            
            for (let i = obstacles.length - 1; i >= 0; i--) {
                const obs = obstacles[i];
                const speed = 5 + Math.floor(dinoScore / 10) * 0.5; // Speed increases every 10 obstacles
                obs.x -= speed;
                
                dinoCtx.fillStyle = '#228B22';
                dinoCtx.fillRect(obs.x, obs.y, obs.width, obs.height);
                
                if (dino.x < obs.x + obs.width && dino.x + dino.width > obs.x &&
                    dino.y < obs.y + obs.height && dino.y + dino.height > obs.y) {
                    dinoGameRunning = false;
                    if (dinoScore > dinoHighScore) {
                        dinoHighScore = dinoScore;
                        localStorage.setItem('dinoHigh', dinoHighScore);
                        document.getElementById('dino-high').textContent = dinoHighScore;
                    }
                    return;
                }
                
                if (obs.x < -obs.width) {
                    obstacles.splice(i, 1);
                    dinoScore++;
                    document.getElementById('dino-score').textContent = dinoScore;
                }
            }
            
            dinoAnimationId = requestAnimationFrame(dinoGameLoop);
        }

        function dinoJump() {
            if (dinoGameRunning && !dino.jumping) {
                dino.jumping = true;
                dino.velocity = -15;
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' && document.getElementById('game-dino').classList.contains('active')) {
                e.preventDefault();
                dinoJump();
            }
        });
        document.getElementById('dino-canvas').addEventListener('click', dinoJump);

        // ASTEROIDS
        let asteroidsCanvas, asteroidsCtx, ship, asteroids, bullets, asteroidsScore, asteroidsLives, asteroidsGameRunning, asteroidsAnimationId;
        let asteroidsKeys = {};

        function startAsteroids() {
            asteroidsCanvas = document.getElementById('asteroids-canvas');
            asteroidsCtx = asteroidsCanvas.getContext('2d');
            ship = { x: 250, y: 250, angle: 0, dx: 0, dy: 0, size: 15 };
            asteroids = [];
            bullets = [];
            asteroidsScore = 0;
            asteroidsLives = 3;
            asteroidsGameRunning = true;
            
            for (let i = 0; i < 5; i++) {
                createAsteroid(Math.random() * asteroidsCanvas.width, Math.random() * asteroidsCanvas.height, 3);
            }
            
            document.getElementById('asteroids-score').textContent = asteroidsScore;
            document.getElementById('asteroids-lives').textContent = asteroidsLives;
            if (asteroidsAnimationId) cancelAnimationFrame(asteroidsAnimationId);
            asteroidsGameLoop();
        }

        function createAsteroid(x, y, size) {
            asteroids.push({
                x: x, y: y,
                dx: (Math.random() - 0.5) * 2,
                dy: (Math.random() - 0.5) * 2,
                size: size, radius: size * 10
            });
        }

        function asteroidsGameLoop() {
            if (!asteroidsGameRunning) return;
            
            asteroidsCtx.fillStyle = '#000';
            asteroidsCtx.fillRect(0, 0, asteroidsCanvas.width, asteroidsCanvas.height);
            
            if (asteroidsKeys['ArrowLeft']) ship.angle -= 0.1;
            if (asteroidsKeys['ArrowRight']) ship.angle += 0.1;
            if (asteroidsKeys['ArrowUp']) {
                ship.dx += Math.cos(ship.angle) * 0.1;
                ship.dy += Math.sin(ship.angle) * 0.1;
            }
            
            ship.x += ship.dx;
            ship.y += ship.dy;
            ship.dx *= 0.99;
            ship.dy *= 0.99;
            
            if (ship.x < 0) ship.x = asteroidsCanvas.width;
            if (ship.x > asteroidsCanvas.width) ship.x = 0;
            if (ship.y < 0) ship.y = asteroidsCanvas.height;
            if (ship.y > asteroidsCanvas.height) ship.y = 0;
            
            asteroidsCtx.save();
            asteroidsCtx.translate(ship.x, ship.y);
            asteroidsCtx.rotate(ship.angle);
            asteroidsCtx.strokeStyle = '#fff';
            asteroidsCtx.lineWidth = 2;
            asteroidsCtx.beginPath();
            asteroidsCtx.moveTo(ship.size, 0);
            asteroidsCtx.lineTo(-ship.size, -ship.size / 2);
            asteroidsCtx.lineTo(-ship.size, ship.size / 2);
            asteroidsCtx.closePath();
            asteroidsCtx.stroke();
            asteroidsCtx.restore();
            
            for (let i = asteroids.length - 1; i >= 0; i--) {
                const ast = asteroids[i];
                ast.x += ast.dx;
                ast.y += ast.dy;
                
                if (ast.x < 0) ast.x = asteroidsCanvas.width;
                if (ast.x > asteroidsCanvas.width) ast.x = 0;
                if (ast.y < 0) ast.y = asteroidsCanvas.height;
                if (ast.y > asteroidsCanvas.height) ast.y = 0;
                
                asteroidsCtx.strokeStyle = '#fff';
                asteroidsCtx.lineWidth = 2;
                asteroidsCtx.beginPath();
                asteroidsCtx.arc(ast.x, ast.y, ast.radius, 0, Math.PI * 2);
                asteroidsCtx.stroke();
                
                const dx = ship.x - ast.x;
                const dy = ship.y - ast.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < ast.radius + ship.size) {
                    asteroidsLives--;
                    document.getElementById('asteroids-lives').textContent = asteroidsLives;
                    asteroids.splice(i, 1);
                    if (asteroidsLives === 0) {
                        asteroidsGameRunning = false;
                        return;
                    }
                    continue;
                }
                
                for (let j = bullets.length - 1; j >= 0; j--) {
                    const bullet = bullets[j];
                    const bdx = bullet.x - ast.x;
                    const bdy = bullet.y - ast.y;
                    const bdist = Math.sqrt(bdx * bdx + bdy * bdy);
                    
                    if (bdist < ast.radius) {
                        bullets.splice(j, 1);
                        asteroids.splice(i, 1);
                        asteroidsScore += ast.size * 10;
                        document.getElementById('asteroids-score').textContent = asteroidsScore;
                        
                        if (ast.size > 1) {
                            createAsteroid(ast.x, ast.y, ast.size - 1);
                            createAsteroid(ast.x, ast.y, ast.size - 1);
                        }
                        break;
                    }
                }
            }
            
            for (let i = bullets.length - 1; i >= 0; i--) {
                const bullet = bullets[i];
                bullet.x += bullet.dx;
                bullet.y += bullet.dy;
                bullet.life--;
                
                if (bullet.life <= 0 || bullet.x < 0 || bullet.x > asteroidsCanvas.width || 
                    bullet.y < 0 || bullet.y > asteroidsCanvas.height) {
                    bullets.splice(i, 1);
                    continue;
                }
                
                asteroidsCtx.fillStyle = '#fff';
                asteroidsCtx.beginPath();
                asteroidsCtx.arc(bullet.x, bullet.y, 2, 0, Math.PI * 2);
                asteroidsCtx.fill();
            }
            
            if (asteroids.length === 0) {
                const numAsteroids = 5 + Math.floor(asteroidsScore / 100); // More asteroids as score increases
                for (let i = 0; i < numAsteroids; i++) {
                    createAsteroid(Math.random() * asteroidsCanvas.width, Math.random() * asteroidsCanvas.height, 3);
                }
            }
            
            asteroidsAnimationId = requestAnimationFrame(asteroidsGameLoop);
        }

        function shootBullet() {
            if (asteroidsGameRunning) {
                bullets.push({
                    x: ship.x, y: ship.y,
                    dx: Math.cos(ship.angle) * 5,
                    dy: Math.sin(ship.angle) * 5,
                    life: 50
                });
            }
        }

        document.addEventListener('keydown', (e) => {
            asteroidsKeys[e.key] = true;
            if (e.code === 'Space' && document.getElementById('game-asteroids').classList.contains('active')) {
                e.preventDefault();
                shootBullet();
            }
        });
        document.addEventListener('keyup', (e) => {
            asteroidsKeys[e.key] = false;
        });

        // PLATFORMER
        let platformCanvas, platformCtx, player, platforms, coins, platformScore, platformLives, platformGameRunning, platformAnimationId;
        let platformKeys = {};

        function startPlatformer() {
            platformCanvas = document.getElementById('platform-canvas');
            platformCtx = platformCanvas.getContext('2d');
            player = { x: 50, y: 300, width: 30, height: 40, dx: 0, dy: 0, jumping: false, grounded: false };
            platforms = [
                { x: 0, y: 370, width: 200, height: 30 },
                { x: 250, y: 320, width: 150, height: 30 },
                { x: 450, y: 270, width: 150, height: 30 },
                { x: 350, y: 220, width: 100, height: 30 },
                { x: 150, y: 170, width: 150, height: 30 },
                { x: 400, y: 120, width: 200, height: 30 }
            ];
            coins = [
                { x: 120, y: 140, radius: 10, collected: false },
                { x: 320, y: 190, radius: 10, collected: false },
                { x: 520, y: 240, radius: 10, collected: false },
                { x: 400, y: 90, radius: 10, collected: false },
                { x: 500, y: 90, radius: 10, collected: false }
            ];
            platformScore = 0;
            platformLives = 3;
            platformGameRunning = true;
            
            document.getElementById('platform-score').textContent = platformScore;
            document.getElementById('platform-lives').textContent = platformLives;
            if (platformAnimationId) cancelAnimationFrame(platformAnimationId);
            platformGameLoop();
        }

        function platformGameLoop() {
            if (!platformGameRunning) return;
            
            platformCtx.fillStyle = '#87CEEB';
            platformCtx.fillRect(0, 0, platformCanvas.width, platformCanvas.height);
            
            if (platformKeys['ArrowLeft']) player.dx = -5;
            else if (platformKeys['ArrowRight']) player.dx = 5;
            else player.dx = 0;
            
            player.dy += 0.8;
            player.x += player.dx;
            player.y += player.dy;
            
            player.grounded = false;
            platforms.forEach(platform => {
                if (player.x < platform.x + platform.width &&
                    player.x + player.width > platform.x &&
                    player.y < platform.y + platform.height &&
                    player.y + player.height > platform.y) {
                    if (player.dy > 0) {
                        player.y = platform.y - player.height;
                        player.dy = 0;
                        player.jumping = false;
                        player.grounded = true;
                    }
                }
            });
            
            if (player.x < 0) player.x = 0;
            if (player.x + player.width > platformCanvas.width) player.x = platformCanvas.width - player.width;
            
            if (player.y > platformCanvas.height) {
                platformLives--;
                document.getElementById('platform-lives').textContent = platformLives;
                if (platformLives === 0) {
                    platformGameRunning = false;
                    return;
                }
                player.x = 50;
                player.y = 300;
                player.dy = 0;
            }
            
            platformCtx.fillStyle = '#FF6B6B';
            platformCtx.fillRect(player.x, player.y, player.width, player.height);
            
            platformCtx.fillStyle = '#8B4513';
            platforms.forEach(platform => {
                platformCtx.fillRect(platform.x, platform.y, platform.width, platform.height);
            });
            
            coins.forEach(coin => {
                if (!coin.collected) {
                    const dx = (player.x + player.width / 2) - coin.x;
                    const dy = (player.y + player.height / 2) - coin.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < coin.radius + player.width / 2) {
                        coin.collected = true;
                        platformScore++;
                        document.getElementById('platform-score').textContent = platformScore;
                    }
                    
                    platformCtx.fillStyle = '#FFD700';
                    platformCtx.beginPath();
                    platformCtx.arc(coin.x, coin.y, coin.radius, 0, Math.PI * 2);
                    platformCtx.fill();
                }
            });
            
            if (coins.every(coin => coin.collected)) {
                platformGameRunning = false;
                return;
            }
            
            platformAnimationId = requestAnimationFrame(platformGameLoop);
        }

        function platformJump() {
            if (platformGameRunning && !player.jumping && player.grounded) {
                player.jumping = true;
                player.dy = -15;
            }
        }

        document.addEventListener('keydown', (e) => {
            platformKeys[e.key] = true;
            if (e.code === 'Space' && document.getElementById('game-platformer').classList.contains('active')) {
                e.preventDefault();
                platformJump();
            }
        });
        document.addEventListener('keyup', (e) => {
            platformKeys[e.key] = false;
        });
    </script>
</body>
</html>